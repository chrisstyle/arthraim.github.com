
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Artoirus</title>
	<meta name="author" content="Arthur Wang">

	
	<meta name="description" content="今天在催了很多次之后，装着诺基亚5800XpressMusic的快递终于发到了我手上，一般我去快递都不是很着急，多等两天也无所谓，但是这次是个手机，好歹是个大件。何况更加关键的是，我看到了网站上的跟踪显示说早上8点就派件了，9点47分我的单子因为&#8221;未知原因派件失败&#8221;。 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Artoirus" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Artoirus</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:artori.us">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:artori.us">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/5800xpressmusic-in-hand/">
		
			纪念5800XpressMusic入手</a>
	</h2>
	<div class="entry-content">
		<p>今天在催了很多次之后，装着诺基亚5800XpressMusic的快递终于发到了我手上，一般我去快递都不是很着急，多等两天也无所谓，但是这次是个手机，好歹是个大件。何况更加关键的是，我看到了网站上的跟踪显示说早上8点就派件了，9点47分我的单子因为&#8221;未知原因派件失败&#8221;。然后我就瞬间茫然了，派件失败怎么处理？我手机也没有响过啊。我打热线，联系本地的小网点，甚至做好了自取的准备。结果中午他送来了，原来他早上送老师的，中午才派送学生的快递，难怪单子已经结束了，可是东西还没有收到。据说卖家已经投诉快递了，看着派件员心情不好的样子我也不是很好意思。不过的确是这样，既然流程结束了，那么你的东西就应该在我手上了。说什么&#8221;未知错误&#8221;也实在太不负责任了，IDE才会干这种事情。</p>

<p>言归正传，上次说了<a href="http://arthraim.cn/post/2009/05/27.html">如何选择3G</a>，这次还是选择了WCDMA的手机。诺基亚5800XM还是非常强悍的，第一次搭载S60 5th Editon，并且是全触屏。我买的不是行货，有WIFI，网速快的情况下很High。有WCDMA，所以加入联通还是有可能的。3.2英寸的屏幕虽然不大，不过320×640的分辨率的确很不错，16:9看视频也是不错的。另外全触摸控制才是真正的关键之处，使用了一天感觉还是很好，不像之前的一些机型那么卡，这一次还是非常友好，用户体验很好。各个功能的入口也发生了一些变化，所以的确是人性化了一些。重力感应可有可无，还有一个赛车游戏，果然是体感王道。320万像素的卡尔塞斯摄像头，看上去不错，不过黑灯瞎火的还是不好，即便有双LED闪光灯，拍照毕竟是其次。还有前面的摄像头用来视频聊天，不过我是没有用到。标配的microSDHC 8G，很过瘾。总之配置的确很大众，很实际。</p>

<p>纪念一下，我的新机子入手了～ 贴图。没有DC，忍受一下这没有微距的模糊效果……</p>

<p><img src="/images/uploads/zb/Nokia5800XM-1.jpg" alt="" /></p>

<p>模糊是模糊了一点，大概看个样子吧。</p>

<p><img src="/images/uploads/zb/Nokia5800XM-2.jpg" alt="" /></p>

<p>横过来的样子（我的手，看相师傅请自重……）</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-19T03:16:38+08:00" pubdate data-updated="true">May 19<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/journey-of-cicaf-video/">
		
			杭州国际动漫展之行 —— 视频篇</a>
	</h2>
	<div class="entry-content">
		<p>今天难得上去youku看视频，结果想起来之前还传了两段上去，第一段是Tomy takara的玩具，平时一只一只看没有感觉，这样子看觉得好可爱。第二段视频是回去学校排练的时候，非常糟糕的陪练情况，是我女朋友站在一旁拍的。直接放视频了。</p>

<hr />

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-16T12:10:36+08:00" pubdate data-updated="true">May 16<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/microsoft-did-two-things/">
		
			微软做了两件事</a>
	</h2>
	<div class="entry-content">
		<p>大中午的在Google Reader看新闻，看到两天比较大的都是和微软有关。</p>

<p>一个是<a href="http://tech.sina.com.cn/it/2009-05-15/12183096184.shtml">微软在杭州建立云计算中心</a>，鲍尔默也来了，并且成立杭州师范大学-微软IT学院。这真的是一个好事情，微软来带动Saas在杭州的发展，而杭师大的事情，倒是着实让人羡慕了一下，对学校的老师、学生都是好事情，可以接触到微软的第一手资料。无论对学习、教学、科研都将有非常大的帮助。（毕竟在中国大学里搞科研的教师都是以教学为前提的。）</p>

<p>还有一个是<a href="http://tech.sina.com.cn/it/2009-05-15/07523094787.shtml">微软要求所有东莞的网吧安装微软正版软件</a>，这是很可怕的事情，就不说Windows，要装Office都难了，不知道允许不允许买一套，其他的全是还原卡，囧。还说如果不装会采取法律行动。这是一件非常可怕地事情，但是确实是一件非常好的事情，虽然网吧经营成本将会可怕地增长，但是不正规的支付不起正版软件的小网吧得到了小管理（除非是硬着头皮经营的更差的网吧），而使用正版，保护知识产权的意识在中国的下一代和这一代都可能得到进一步的提高。这对于不看好中国桌面市场的公司来说，吃桌面饭的微软老大来做这样的事情，都会产生一些信心的。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-15T22:06:07+08:00" pubdate data-updated="true">May 15<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/i-t-/'>I.T.</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/more-axum-what-is-agent-and-pipeline/">
		
			继续研究Axum —— 初解agent和pipeline</a>
	</h2>
	<div class="entry-content">
		<p><strong>写在前面：我也是刚刚接触包括actor模型在内的并行开发概念，所以理解有偏差的地方还希望看见的人可以给我指出来。共同前进。毕竟在我看来，这是我们的发展方向。</strong></p>

<p>还是围绕核心的这句话。</p>

<blockquote><p>&#8220;A .NET language for safe, scalable and productive parallel programming through isolation, actors and message-passing.&#8221;</p></blockquote>

<p>在<a href="http://arthraim.cn/post/2009/05/32.html">上一篇文章</a>也在讲这句话，但是说穿了讲的应该是：</p>

<blockquote><p>&#8220;A .NET language for parallel programming through message-passing.&#8221;</p></blockquote>

<p>我们只是从一个channel中派生了一个agent，做了数据传递而已，真正意义上的actor在哪里没有讲到（虽然有用到）。那么这次讲一讲。因为刚好看到<a href="http://www.cnblogs.com/JeffreyZhao/archive/2009/05/11/a-simple-actor-model-implementation.html">老赵的博客上</a>好好的分析了actor模型一把，要好好向他学习啊。</p>

<p>Axum是为并行而生的.net语言，那么他提供了非常完整的Actor模型，使得每个actor可以安全的并发。那么不用说，coding的时候就肯定用到过了actor模型，究竟他在哪里呢？其实就是agent。还记得写Axum的<a href="http://arthraim.cn/post/2009/05/31.html">第二篇文章</a>，看到VS2008 generate出来的代码之后，看到agent的时候非常疑惑，那么现在就可以解惑了。</p>

<p><strong>agent就是在axum中的actor模型。</strong></p>

<p>讲到这里就很明显了，只是从channel派生出来的actor模型本身还肩负着其他功能。我想跟着Guide走，那么下一次也许还有机会讲到agent。</p>

<hr />

<p><strong> 然后讲讲pipeline。先从一个程序出发：斐普纳吉数列的实现。</strong></p>

<p>首先是从Microsoft.Axum.Application这个channel中派生出一个agent &#8212;- MainAgent。</p>

<pre><code>using System;
using Microsoft.Axum;
using System.Concurrency.Messaging;
agent MainAgent : channel Microsoft.Axum.Application
{
    // ...
    public MainAgent()
    {
        // ...
    }
}
</code></pre>

<p><strong>agent从channel中派生是种什么特殊情况呢？</strong>在Guide上是这么描述的：</p>

<blockquote><p>Implementing a channel is different - syntactically and semantically - from deriving from a base agent. When an agent derives from another agent, it merely extends it by overriding some virtual methods, and potentially adding more of its own.</p></blockquote>

<pre><code>    However, when an agent implements a channel (notice the channel keyword after the colon in the agent declaration), it "attaches" itself to the implementing end of that channel and becomes the "server" of messages on that channel. The other end of the channel - known as the using end - is only visible to the "client", or the component (typically another agent) on the other end of the channel.
</code></pre>

<blockquote></blockquote>

<p>大概翻译一下：（哪怕只当Guide翻译集锦看也好）</p>

<blockquote><p>从一个channel派生和从一个接触agent中派生是不一样的，有字面上的和语义上的两种理解。一个agent从另一个agent从派生的话，只不过是通过覆盖重写它的方法或可能为自己增加更多的一种扩展。</p>

<p>然而当一个agent从一个channel派生的话，它是把自己&#8221;贴&#8221;到channel的派生端（implementing end），从而成为channel上的信息的&#8221;服务端&#8221;。而Channel的另一端（被称作应用端（using end））是指对&#8221;客户端&#8221;或在channel另一端的某个组件（代表性的就是另一个agent）。</p></blockquote>

<p>channel负责传递信息，但是它不会对信息做任何处理。（处理的当然是agent啦）</p>

<p><img src="/images/uploads/zb/2009-05-14_TwoEndsChannel.png" alt="" /></p>

<p><strong>那从Microsoft.Axum.Application这个channel派生的主程序是如何处理信息的呢？</strong></p>

<blockquote><p>The runtime instantiates the agent implementing channel Microsoft.Axum.Application, sends command line parameters to the channel&#8217;s CommandLine port, and then waits for a message on port ExitCode. When the message is received, the application shuts down.</p>

<p>从Microsoft.Axum.Applicationruntime这个Channel派生过来的agent的runtime实例，发送命令行参数到channel的命令行端口（CommandLine port），然后等待退出代码端口（prot ExitCode）的信息。当收到信息后，应用程序就关闭。</p></blockquote>

<p>这样一个ax程序的运行机理也就知道了，如果说C是从main函数中得到参数，执行完毕后跳出。那ax程序就是从这个main channel出发，得到退出代码的信息后退出。</p>

<p>继续补充代码，然后来看看信息的异步编程。先写一个斐普纳吉的递归算法。</p>

<pre><code>function int Fibonacci(int n)
{
    if( n&lt;=1 ) return n;
    return Fibonacci(n-1) + Fibonacci(n-2);
}
</code></pre>

<p>然后是界面的代码。</p>

<pre><code>int numCount = 10;
void ProcessResult(int n)
{
    Console.WriteLine(n);
    if( --numCount == 0 )
    {
        Console.ReadLine();
        PrimaryChannel::ExitCode &lt;-- 0;
    }
}
</code></pre>

<p>这些都是无聊的部分了说。PrimaryChannel::ExitCode &lt;&#8211; 0; 可以理解为跳出代码，就像前面说到的，给main channel（PrimaryChannel）ExitCode Port送去0，程序就退出了。至于ReadLine只是为了看到打印的10个结果而已。</p>

<p>之后就是最精彩的创建OrderedInteractionPoint和pipeline的代码了。</p>

<pre><code>public MainAgent()
{
    var numbers = new OrderedInteractionPoint&lt;int&gt;();
    // Create pipeline:
    numbers ==&gt; Fibonacci ==&gt; ProcessResult;
    // Send messages to numbers:
    for( int i=0; i&lt;numCount; i++ )
        numbers &lt;-- 42-i;
}
</code></pre>

<p>从格式上看，微软工程师们还是很有创意的，这段代码看上去很有美感。值得说的东西也是非常的多。</p>

<p>Axum提供了两种orchestration（这单词怎么翻译？编排？）方式，基于控制流（control-flow-based）和基于数据流（data-flow-based）。</p>

<blockquote><p>In Axum, the messages are sent to and received from the interaction points. An interaction point from which a message originates is called the source, and the destination is called the target. An interaction point can be both a source and a target, meaning that it can both send and receive messages. This allows composition of multiple interaction points into dataflow networks.</p>

<p>在Axum中，信息传递和接受是通过interaction points（互动点？）的。信息源的interaction point叫做source，目的地的叫做target。同一个interaction point能同时既作为source，又作为target，意味着它能同时发送和接受信息。这样就允许很多的Interaction point组成一个数据流网络。</p></blockquote>

<p>翻译过来之后，意思应该已经比较清晰了，数据流和原始的控制流程序不一样，以前类似上面代码的过程，我们写完两个方法之后需要把一个先初始化两个数据，其中一个传入斐普纳吉计算然后一个去接受结果（不是唯一解决方法），然后再将结果去交给界面方法打印。而现在我们调用的过程就整个缩减为一个管道：</p>

<blockquote><p>numbers ==> Fibonacci ==> ProcessResult;</p></blockquote>

<p>numbers是创建的OrderedInteractionPoint，Ordered可以看出它是有顺序的，这个后面会讲到。当执行到numbers &lt;&#8211; 42-i语句的时候，这个interaction point得到了信息，于是激发了管道内后面的function的运行。看上去的确很棒！</p>

<p>有了pipeline，我们就要使用它，因为axum在编译的时候对它是进行特殊处理的。比如斐普纳吉计算过程是a side-effect-free function，一个没有副作用的函数，那么axum就会根据它认为最有效的方式的方式编译出多个线程来处理，并行的优势就体现在这里。</p>

<p>之前说到Ordered，虽然这个数据流是可以并行执行的，但是它的顺序是不会发生变化的，哪怕多个实例在一个结点上，想进入下一个结点你也是必须执行完现在的节点的。就比如说上面的程序中，UI打印模块在你完成斐普纳吉计算前绝对不能新建线程。</p>

<p><strong>程序代码和执行效果：</strong></p>

<p><img src="/images/uploads/zb/2009-05-14_run.png" alt="" /></p>

<hr />

<p>说到这里就把Axum的agent和pipeline都说完了。简单的总结起来，agent就是actor模型的实现，而pipeline就是基于数据流的程序驱动方式。</p>

<p>关于Axum的其他新特性，再慢慢研究咯～</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-15T06:23:57+08:00" pubdate data-updated="true">May 15<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/microsoft-axum-learn-grammar-with-video/">
		
			Microsoft Axum —— 跟着视频看语法(AxumMath的实现)</a>
	</h2>
	<div class="entry-content">
		<p>其实这是一种抄袭行为，跟着主页上的视频把代码实现了一遍，用以理解所谓的 ：</p>

<blockquote><p>&#8220;A .NET language for safe, scalable and productive parallel programming through isolation, actors and message-passing.&#8221;</p></blockquote>

<p>平台为Windows 7 build 7057（没有更新RC版啊），IDE是Visual Studio 2008。<strike>不知道2005是不是支持，我的windows xp中安装了Axum和VS2005的，一会考证一下。</strike> 经确认VS2005是不能新建Axum工程的。</p>

<p><strong>下图为IDE和程序运行结果。</strong></p>

<p><img src="/images/uploads/zb/AxumMath.PNG" alt="" /></p>

<p>虽然实现的程序和C#的ReadLine获得几个数字，加一下乘一下得到的效果是一样的，不过我的数据不是通过访问内存的，而是通过Axum提供的数据传输方式的。</p>

<p>简单的说：首先做了一个channel，作为一切传输的通道，输入的数据是int X和int Y，输出的数据是int Z。然后在这个channel的基础上新建两个agent，分别完成相加和相减的过程。</p>

<blockquote><p>Z &lt;&#8211; ( receive(X) + receive(Y))</p></blockquote>

<p>这句话是核心，receive(X)的方法，是agent从channel中接受X的信息，而做出处理后 &lt;&#8211; 传输给Z，Z就得到了需要的结果。（究竟是先处理数据再传输，还是传输过来后再处理不得而知）</p>

<p>UI逻辑中，首先将两个agent创建不同的domain（话说Axum是弱类型语言呢～），然后就可以通过ReadLine得到输入的数据，通过之前创建的domain直接去接收结果。</p>

<p>这是单击完成的，不知道分布之后是不是有特殊地方。下面是视频中整个程序的结构图例。</p>

<p><img src="/images/uploads/zb/2009-05-13_frame.png" alt="" /></p>

<p><strong>下面插入代码，（看来是不是应该自定义高亮方式了呢？先采用相对接近的C#吧～）</strong></p>

<pre><code>using System;
using System.Concurrency;
using Microsoft.Axum;
namespace AxumMath
{
    channel IntOperater
    {
        input int X;
        input int Y;
        output int Z;
    }
    private agent AdderAgent : channel IntOperater
    {
        public AdderAgent()
        {
            while(true)
            {
                Z &lt;-- ( receive(X) + receive(Y));
            }
        }
    }
    private agent MultiplierAgent : channel IntOperater
    {
        public MultiplierAgent()
        {
            while(true)
            {
                Z &lt;-- ( receive(X) * receive(Y));
            }
        }
    }
    private agent MainAgent : channel Application
    {
        public MainAgent()
        {
            var adder = AdderAgent.CreateInNewDomain();
            var multiplier = MultiplierAgent.CreateInNewDomain();
            while ( true )
            {
                Console.Write("X: ");
                var x = Int32.Parse(Console.ReadLine());
                Console.Write("Y: ");
                var y = Int32.Parse(Console.ReadLine());
                adder::X &lt;-- x;
                adder::Y &lt;-- y;
                multiplier::X &lt;-- x;
                multiplier::Y &lt;-- y;
                Console.WriteLine( "Sum: " + receive(adder::Z ));
                Console.WriteLine( "Product: " + receive(multiplier::Z ));
            }
        }
    }
}
</code></pre>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-14T07:25:35+08:00" pubdate data-updated="true">May 14<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/microsoft-axum-hello-axum/">
		
			Microsoft Axum 初探 —— Hello Axum</a>
	</h2>
	<div class="entry-content">
		<p>虽然是针对Windows7的，不过还是迫不及待的想写一个Hello,world出来，于是来搞搞吧。</p>

<p><strong>1、下载Axum.msi，并安装。</strong></p>

<p><img src="/images/uploads/zb/2009-05-13_AxumInstall1.png" alt="" /></p>

<p><strong>2、新建Axum语言工程。</strong></p>

<p>安装好之后，直接打开Visual Studio 2008，可以看到，新的语言Axum出现在列表里，并且有工程类库和控制台程序两个工程可以新建了。</p>

<p><img src="/images/uploads/zb/2009-05-13_vs2008axum1.png" alt="" /></p>

<p><strong>3、看看Axum的语法规则。</strong></p>

<p>新建了一个Console Application之后，速度看看它generate了一些什么代码。[如下图]</p>

<p>果然不出所料的一头雾水啊，domain是个什么存在，agent又是什么呢？ :: 是什么？C++的domian的概念吗？那 &lt;&#8211; 这又是什么。虽然看上去有些像C家族的语言，不过一上来真是一头雾水啊。从微软的高亮习惯，似乎可以猜出一些什么东西来。</p>

<p><img src="/images/uploads/zb/2009-05-13_GenerateCode.png" alt="" /></p>

<p><strong>4、下载Programmer&#8217;s Guide。</strong></p>

<p>还是老老实实的看看官方做法吧，下载一份<a href="http://download.microsoft.com/download/B/D/5/BD51FFB2-C777-43B0-AC24-BDE3C88E231F/Axum%20Program">官方指导</a>来看看。</p>

<p><img src="/images/uploads/zb/2009-05-13_Programmer_Guide.png" alt="" /></p>

<p><strong>5、Ctrl + C, Ctrl + V 一下，写出我们第一个Hello,Axum～</strong></p>

<p>看上去调用System命名空间里的方法和C#是一样的吧～ 那么试试看ReadLine什么的。好吧的确一样的。</p>

<p><img src="/images/uploads/zb/2009-05-13_HelloAxum.png" alt="" /></p>

<p><strong>6、编译出来的bin文件</strong></p>

<p><img src="/images/uploads/zb/2009-05-13_bin.png" alt="" /></p>

<p>究竟Axum，带给了我们什么新特性呢？继续研究……</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-14T02:33:23+08:00" pubdate data-updated="true">May 14<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/microsoft-axum-new-dotnet-language/">
		
			Microsoft Axum —— 新的.net程序语言</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/uploads/zb/dd795202.AXUM_banner(en-us" alt="" />.png)</p>

<p>微软发布了最新的.net编程语言&#8212;-Axum。主要针对Windows7，不知道具体带给了我们什么不一样的东西，小心的窥探一下先。</p>

<p><a href="http://msdn.microsoft.com/en-us/devlabs/dd795202.aspx">官方网址</a> | <a href="http://blogs.msdn.com/maestroteam/default.aspx">Axum小组博客</a> | <a href="http://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=cfe70d5d-37aa-4c4c-8eeb-d4576c41baa2#tm">下载</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-14T02:11:05+08:00" pubdate data-updated="true">May 14<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/grieve-day-giveup-colors-for-you/">
		
			哀悼日，为了你们放弃颜色 | 网站黑白化代码</a>
	</h2>
	<div class="entry-content">
		<p>哀悼日已经到了，为了四川大地震中的罹难同胞，我们放弃网站的颜色，来表达我们对你们的哀思。</p>

<p><img src="/images/uploads/zb/512.jpg" alt="" /></p>

<p>BTW:网站黑白化代码，提供给所有看到的站长们，让今天的网络，没有色彩。（IE有效，Firefox，Chrome，opera，Safari均无效）</p>

<pre><code>body{
filter:Gray;
}
</code></pre>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-12T08:59:08+08:00" pubdate data-updated="true">May 12<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/color-picking-combobox-in-c-sharp/">
		
			C#实现ComboBox选择颜色的控件</a>
	</h2>
	<div class="entry-content">
		<p>因为项目需要，要找一个ComboBox选择颜色的控件。于是想自己动手做，一看网上资料很多，很多人很多年前就实现过。不过要不就是我的搜索功力不够，要不就是真的没有C#版本的东西，所以我无聊就把VB版的&#8221;翻译&#8221;了一下，供大家参考。（VB版本请参照<a href="http://blog.csdn.net/hamadou/archive/2005/08/06/447127.aspx">闵峰4年前的总结</a>）</p>

<p>在把VB写过来的时候遇到了GetType用法不太一样的问题，VB里GetType(Color)这个语句在C#是不一样的。我尝试过Color.GetType()但是之后就不能再GetProperties了。另外Color必须是一个变量，而不是一个类型。如果用typeof(Color).GetProperties()的话，结果是什么都获取不到。我始终没有得到什么解决的方法，<a href="http://forums.asp.net/p/1143676/1847955.aspx#1847955">这里</a>有一些关于这个问题老外的讨论。我最终是采取了其他的方法获取，就是System.Enum.GetValues(typeof(KnownColor))，返回一个Array，感觉不是很好，希望得到补充。</p>

<p>另外我加上了一个SelectedColor的属性，可以在自定义控件外得到相应的颜色。不过我想到有一个缺点，就是UserControl上放上ComboBox再处理，那就无法获取SelectedIndexChanged或者SelectedValueChanged等等的方法了，所以不要在UserControl加，直接从ComboBox派生出来更加理想，交给各位看官去修改了。</p>

<p>还看到一个其他的实现方法，类似于Word的颜色选择框，需求和我这个差不多，实现起来要困难一些，放上链接看需要了。<a href="http://blog.csdn.net/ymqpxy/archive/2007/11/29/1907933.aspx">原文</a> | <a href="http://hi.baidu.com/skynomadism/blog/item/45d1ebcdfe2072560fb345b8.html">详解</a>（有6篇，链接为第一篇）</p>

<p>Good luck ;)</p>

<p><strong>实际效果图：</strong></p>

<p><img src="/images/uploads/zb/2009-05-11_ColorComboBox.png" alt="" /></p>

<p><strong>另一个我提到的效果：</strong></p>

<p><img src="/images/uploads/zb/2009-05-11_WordTypeColorSelect.png" alt="" /></p>

<p><strong>代码：</strong></p>

<pre><code>public partial class ColorComboBox : UserControl
{
    private Color _SelectedColor;
    /// &lt;summary&gt;
    /// 已选择颜色
    /// &lt;/summary&gt;
    public Color SelectedColor
    {
        get { return _SelectedColor; }
        set { _SelectedColor = value; }
    }
    public ColorComboBox()
    {
        InitializeComponent();
    }
    private void ColorComboBox_Load(object sender, EventArgs e)
    {
        PersonalizeComponent();
    }
    private void PersonalizeComponent()
    {
        this.comboBox1.DrawMode = DrawMode.OwnerDrawFixed;
        this.comboBox1.DropDownStyle = ComboBoxStyle.DropDownList;
        this.comboBox1.ItemHeight = 15;
        this.comboBox1.BeginUpdate();
        this.comboBox1.Items.Clear();
        /*
        //原始代码，期待有心之人的修改
        foreach (PropertyInfo propertyInfo in typeof(System.Drawing.KnownColor).GetProperties())
        {
        this.comboBox1.Items.Add(propertyInfo.Name);
        }
        */
        Array colors = System.Enum.GetValues(typeof(KnownColor));
        foreach (object oneColor in colors)
        {
            this.comboBox1.Items.Add(oneColor.ToString());
        }
        this.comboBox1.EndUpdate();
    }
    private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index &lt; 0)    return;
        Rectangle rect = e.Bounds;
        if (e.State == DrawItemState.Selected)
        {
            e.Graphics.FillRectangle(SystemBrushes.Highlight, rect);
        }
        else
        {
            e.Graphics.FillRectangle(SystemBrushes.Window, rect);
        }
        string colorName = comboBox1.Items[e.Index].ToString();
        SolidBrush brush = new SolidBrush(Color.FromName(colorName));
        SelectedColor = brush.Color;
        //缩小选定项区域
        rect.Inflate(-2, -2);
        // 填充颜色
        e.Graphics.FillRectangle(brush, rect);
        // 绘制边框
        e.Graphics.DrawRectangle(Pens.Black, rect);
        Brush brush2;
        // 确定显示的文字的颜色
        if (Convert.ToInt32(brush.Color.R)+Convert.ToInt32(brush.Color.G)+Convert.ToInt32(brush.Color.B)&gt;3*128)
        {
            brush2 = Brushes.Black;
        }
        else
        {
            brush2 = Brushes.White;
        }
        e.Graphics.DrawString(colorName, this.comboBox1.Font, brush2, rect.X, rect.Y);
    }
}
</code></pre>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-12T05:58:20+08:00" pubdate data-updated="true">May 12<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/how-to-choose-a-3g-cellphone/">
		
			如何选择3G手机？</a>
	</h2>
	<div class="entry-content">
		<p>自从手机利用房间垃圾桶脱逃之后，买个新手机的想法就一直徘徊于脑海之中。眼看3G就要在杭州搞起来了，买一个能支持3G的手机才是当务之急，那么在这个不三不四的时候究竟如何选择一款能长治久安的手机似乎真的是一个学问。</p>

<p>先介绍一下之前的N72，也算是N系的明星机型了，到了后期真的是正宗的街机。上至企业白领，下至外地民工，谁都能用得起，而且功能也的确是中规中矩了。只是S60第三版横行的大学校园里显得有些落伍而已。所以对于它我还是非常喜欢的。我喜欢直板机，因为滑盖翻盖什么的到了我手上说不定几个月后就变成两个手机了，所以还是直板耐用。</p>

<p>再讲讲3G，可恶的3G三足鼎立也不是一件好事情。因为我们入什么网就要买什么手机。所以万一你买了一个优秀的终端，可是网络服务不好，那么就哭去吧。也许某个运营商资费便宜、网络通畅、信号强大、服务优良，集一切优点于一身，可是终端牌子、性能、外观、质量都差，也就无奈了。所以在这个应该观望的时候想要买一个手机是非常痛苦的。</p>

<hr />

<p><img src="/images/uploads/zb/tianyi.jpg" alt="" />电信的3G品牌。最早公布的，也是现在广告最多的，貌似我们学校电梯里面就有，资费标准也都出来了，基本上还是消费的起的一种情况。提供的终端是我比较郁闷的，CDMA2000的终端都看上去很不好，而且太粗糙。电信刚刚拥有手机这一业务，我个人真的非常不看好电信，虽然不能一棒子打死说以后他怎么样怎么样的，不过从目前来看，应该还是会在移动和联通当中做出选择，应该有很多人和我一样吧。到目前为止的天翼，应该是不会选择的。</p>

<p>值得一提的是LG给电信提供了一些终端，其中一些还是很不错的，比如&#8221;心贵&#8221;手机KW838，这应该也是电信现在宣传的生力军了，价格也还算合理。</p>

<p><img src="/images/uploads/zb/KM838.jpg" alt="" /></p>

<hr />

<p><img src="/images/uploads/zb/G3.jpg" alt="" />G3是移动的3G品牌，LOGO灵感来源于太极。好吧我败了，说实话真的不感冒，第一次听说叫G3，我就想，你把3G倒过来有啥意思啊。LOGO又是毛笔字+图章的设计，真的失去了一些新意啊。</p>

<p>当然移动的优势不在这里，移动的优势在动感地带，也就是大把大把的学生用户。浙江省的套餐便宜到令人发指，月租费也就是15-25RMB左右，你要是其他什么都不用，那么一个月就是这些了，包括一定的短信和电话通话时间。虽然说便宜，但是其实利润还是非常大的。手机上网、彩铃、QQ、彩信举不胜举的其他业务在学生中是非常常用的，所以移动的确是在2G时代强大到了无边无际的情况。</p>

<p>利用已经有的用户群优势，移动应该会在3G时代做出点名堂。只是移动的TD-SCDMA技术是相对比较落后的（相对于其他两个来说），当然我估计对于用户来说不会有什么特别的感觉。另外移动的终端也是非常的强悍。有中兴的加盟，另外还听说诺基亚强力支持TD，真是这样，那移动又要强大一回了。查了下，TD终端：熊猫、宇龙酷派、中兴、三星、夏新、LG、华为、多普达、华立、海信、联想、TCL、新邮通、龙旗、海尔、大唐电信、飞利浦、摩托罗拉、UT斯达康。</p>

<blockquote><p>无需换号，无需换卡，也不用到营业厅登记，只需更换一部TD制式的手机，就可以享受到精彩的移动3G生活。这就是中国移动一直强调的&#8221;三不原则&#8221;。据介绍，用3G手机通话，资费和2G手机一致。用3G手机上网，速度更快，资费按流量计费，资费和2G上网相一致。</p></blockquote>

<p><img src="/images/uploads/zb/samsung_sgh_l288.jpg" alt="" /></p>

<hr />

<p><img src="/images/uploads/zb/wo.jpg" alt="" />联通的3G品牌是最后一个出炉的，当然也是最雷我的一个，满世界的都是&#8221;沃&#8221;，你不觉得很奇怪吗？不过不得不承认，沃这个品牌看上去奇怪，确实最时尚的一个。不知道其他人如何认为，对我来说，沃是让我觉得最舒服的一个。联通从品牌上就不小心抓住了我的心。</p>

<p>虽然联通的资费标准还不是十分明朗，不过估计也是八九不离十，何况2G时代的收费，的确是联通比较低。联通这次卯足了劲想要打个翻身仗，这个地方应该不会犯错吧。</p>

<p>联通的终端优势也非常明显。WCDMA手机可谓随处可见。要什么牌子有什么牌子。只是一般都是水货。我对N78和5800Xpressmusic很有好感，只是他们的行货都不支持WIFI和WCDMA，真是可恶啊。话说S60第五版的SDK也可以在nokia官网上下到了。</p>

<p><img src="/images/uploads/zb/nokia-n78-phone.jpg" alt="" /></p>

<hr />

<p>最后还是这个问题，如何选择3G手机呢？经过上面的介绍，究竟选择什么运营商？什么制式的手机呢？</p>

<p>我还是茫然啊 囧。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2009-05-11T01:38:46+08:00" pubdate data-updated="true">May 11<span>th</span>, 2009</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/i-t-/'>I.T.</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/blog/page/18/" class="prev">Prev</a>
    
    
        <a href="/blog/page/20/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2012

    Arthur Wang

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'artorius';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-8352384-7']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>