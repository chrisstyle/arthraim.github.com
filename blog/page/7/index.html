
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Artoirus</title>
	<meta name="author" content="Arthur Wang">

	
	<meta name="description" content="某个VC6.0时代的组件，因为不想翻新它所以拿出原来的代码进行编译。三个项目在一个dsw中，dll1,dll2和一个应用（app1），我要用到的是dll2。当时学长留下这个组件的时候告诉我：&#8221;千万不要clean，不然就要碰运气了&#8221;。在整整一年的开发里， &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Artoirus" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Artoirus</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:artori.us">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:artori.us">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/c-dll%E9%81%AD%E9%81%87%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AFlnk2005/">
		
			C++ Dll遭遇连接错误LNK2005</a>
	</h2>
	<div class="entry-content">
		<p>某个VC6.0时代的组件，因为不想翻新它所以拿出原来的代码进行编译。三个项目在一个dsw中，dll1,dll2和一个应用（app1），我要用到的是dll2。当时学长留下这个组件的时候告诉我：&#8221;千万不要clean，不然就要碰运气了&#8221;。在整整一年的开发里，我也从来没有clean过。当然这次整理代码的时候，我把它折腾了一下，我就不信这个邪了…… 结果就遇到了标题所说的错误。</p>

<p>具体发生在我编译了dll1，然后去编译dll2，因为dll2依赖dll1。编译dll1的时候还算顺利，少了一个.lib，给它在相应位置放着，就万事大吉了。结果编译dll2的时候错误来了：</p>

<blockquote><p>nafxcwd.lib(afxmem.obj) : error LNK2005: &#8220;void * __cdecl operator new(unsigned int)&#8221; (??2@YAPAXI@Z) bereits in (already on) LIBCMTD.lib(new.obj) definiert (defined)</p>

<p>nafxcwd.lib(afxmem.obj) : error LNK2005: &#8220;void __cdecl operator delete(void *)&#8221; (??3@YAXPAX@Z) bereits in (already on) libcpmtd.lib(delop.obj) definiert (defined)</p></blockquote>

<p>这不明所以的东西是啥，紧接着error下面还有个warning，说的也是这个东西。我就奇怪了…… Google了一会儿，在<a href="http://www.codeguru.com/forum/archive/index.php/t-102337.html">这里</a>发现是CRT和MFC中都有定义new和delete，编译器显然不知道要去找哪个new哪个delete了。</p>

<p>我的解决方法：</p>

<ul>
<li><p>在VC6.0中按art+F7</p></li>
<li><p>选择出现的对话框中右侧选择出错的项目，然后选&#8221;连接&#8221;标签</p></li>
<li><p>&#8220;分类&#8221;下拉框里选择&#8221;输入&#8221;</p></li>
<li><p>如图填写相应的模块（多个模块的填写顺序是敏感的）</p></li>
</ul>


<p><a href="/images/uploads/wp/2010-05-06_cpp_dll_link_error_solution.png"><img src="/images/uploads/wp/2010-05-06_cpp_dll_link_error_solution.png" alt="" /></a></p>

<p>上文的链接中还提供了另外一种解决方案~ 没有尝试~</p>

<p>记录一下，证明我为毕业设计和历史遗留问题奋斗过 ToT，以上！</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-05-06T09:00:40+08:00" pubdate data-updated="true">May 6<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/happy-birthday-2/">
		
			生日快乐</a>
	</h2>
	<div class="entry-content">
		<p>又是生日了，我觉得我已经不年轻了，在实况里到了这个年龄的球员我就已经觉得没有培养价值了…… 而且，我似乎也不能再长高了，真是一个让人悲伤的生日啊。话说今天发表了一个言论，&#8221;生日快乐&#8221;只是祝福生日当天的，但是生日那天祝福被祝福的人一年快乐不是更好吗？所以我提议，从今年开始，别人生日都祝福&#8221;新年快乐&#8221;。在我发表此言论之后，就收到了一条祝福短信&#8212;-新年快乐~</p>

<p>好，那么今年还是收到了外公外婆的RMB，我和他们说好明年再也表给了。GF送了我一条情侣装，可是她不要穿，只有我要穿。亮哥又送了我哥屁，这一次姣姣也送了我个屁，好歹去年还送了我半个手柄。爸妈送了我还是一个屁，真是悲情的生日啊。</p>

<p>另外，QQ、短信、论坛、SNS上都收到了很多朋友的生日祝福，谢谢大家。</p>

<p><a href="/images/uploads/wp/2010-05-03_happy_birthday.png"><img src="/images/uploads/wp/2010-05-03_happy_birthday.png" alt="" /></a></p>

<p>以上。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-05-04T00:41:05+08:00" pubdate data-updated="true">May 4<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/farewell-levelup-cn/">
		
			Farewell, Levelup.cn</a>
	</h2>
	<div class="entry-content">
		<p><a href="/images/uploads/wp/2010-04-29_levelup_cn_logo.jpg"><img src="/images/uploads/wp/2010-04-29_levelup_cn_logo.jpg" alt="" /></a>这是今年第二次为一个.cn网站说farewell了，是的，经历了到处都是小道消息的一个多月之后，我确定了，我们都确定了 &#8212;- 游戏城寨(levelup.cn)真的离开大家了。</p>

<p><strong>一个月前（3月20日左右）</strong>，突然发现游戏门户网站（依托国内第一电视游戏杂志《游戏机实用技术》的游戏咨询门户网站，以及一个同样内容的BBS社区）不能上去了，bbs.levelup.cn的访问量大，服务器压力大，故障时有发生，在levelup混的朋友都戏称这种现象为&#8221;月经&#8221;，每个月要经历一次，所以那天我也不以为然，但是的确，bbs挂掉的时候很多，主站挂掉是很难得的事情。</p>

<p><strong>第二天</strong>在levelup依然没法访问的同时，我收到了很多朋友的消息，说为什么levelup不能访问了。我当时第一个猜测就是，互联网的收紧把论坛+游戏的&#8221;高危&#8221;网站levelup给关掉了。</p>

<p><strong>之后</strong>levelup的编辑们在大力监管下的新浪博客开设了自己的<a href="http://blog.sina.com.cn/levelupcn">官方博客</a>，旨在继续为各位玩家提供最新的第一手资料，与此同时，博客的公告栏里赫然写道了这样的内容，打消了大家的疑虑，并且也让我庆幸只是一次技术上的问题，而不是政策上的错误，对他的回归充满信心。</p>

<blockquote><p>关于游戏城寨（levelup.cn）访问故障的公告</p>

<p>游戏城寨网站因故需要停机维护。有最新消息我们会第一时间在本公告栏发布。</p>

<p>由此带来的不便，我们深表歉意。感谢大家的支持和理解。</p>

<p>Hikaru</p>

<p>levelup.cn</p>

<p>2010年3月23日</p></blockquote>

<p><strong>3月26日</strong>，我无意间看到了一个传闻，传闻说是&#8221;levelup 正式关闭，所有职员离职，遣散费一个人三个月的工资。&#8221;。看到这个小道消息的时候我很激动，当时订阅了上面提到的博客，但是没有上去，于是这一次一访问才发现博客的公告栏已经发生了一些变化。显然，真实的原因在24日的时候就已经浮出水面。</p>

<blockquote><p>关于游戏城寨（levelup.cn）访问故障的公告</p>

<p>游戏城寨网站域名被有关部门停止解析，短时间内可能无法开放。有最新消息我们会第一时间在本公告栏发布。</p>

<p>由此带来的不便，我们深表歉意。感谢大家的支持和理解。</p>

<p>Hikaru</p>

<p>levelup.cn</p>

<p>2010年3月23日，24日</p>

<hr />

<p>近期游戏攻略、评测请查看UpTeam官方百度贴吧。</p>

<p>点击进入临时论坛，感谢罗伊SD提供。</p></blockquote>

<p><strong>同日</strong>，levelup成员（论坛管理员）在新浪博客里写了一篇文章&#8212;-《<a href="http://blog.sina.com.cn/s/blog_66555c710100hp4y.html">这个五周年，有点不一样</a>》。是的恰逢levelup五周年，可是网站却无法访问，方寸的文章写得很好，原文如下：</p>

<blockquote><p>《【游戏城寨】这个五周年，有点不一样》</p>

<p>开个官方水楼、请一些老会员来留言、表彰一下去年有过一些突出贡献的会员和版主、发点小礼品、公布新的周年纪念勋章，这些早在几周前就开始陆续准备着的，没想到迎来的今天是这样。</p>

<p>被水民们灌爆帖子、听取老会员和朋友们的批评建议、看到会员们的祝福和感言，今天所有能想得到的情况都想过了，唯独这种让人无奈地接受它的突然到来。</p>

<p>在其他论坛、贴吧、QQ群里都看到了大家的询问和关心，我代表所有LU的工作人员、社区全部管理人员、广大会员谢谢大家。</p>

<p>很遗憾，我们持续几天的努力没有得到结果，所以城寨的五岁生日恐怕也就只能这么过去了，对不起，对不起。</p>

<p>对一直在支持着我们的网友、会员、各个小组成员、社区管理人员们，虽然一家人不说两家话，但我依然要对你们表达无限的谢意，谢谢，谢谢。</p>

<p>希望能够尽早解决此事，六周年好好过吧。</p>

<p>今年有点特殊，没蛋糕，送上这张图，这是大家五年在城寨上全部可以数据化的内容，以及送上不能用数据代替的感情。</p>

<p><img src="/images/uploads/wp/2010-04-29_levelup_cn_servers.jpg" alt="levelup_cn_servers" /></p></blockquote>

<p><strong>4月10日</strong>。在方寸的那篇文章之后，这个新浪博客停止更新了一段时间，让人感到一阵心慌，不过几天后，博客又开始更新了，就这样断断续续的一直更新到了4月10日，之后这个博客再也没有动静了，后面的十几天里这个博客也再没有像之前一样&#8221;复活&#8221;过。与此同时，levelup.cn的主站，也再也没有能ping到过。</p>

<p><strong>4月27日</strong>，之前在levelup论坛里传的沸沸扬扬的编辑&#8221;多边形&#8221;离开UCG和LU而转投腾讯的事情水落石出的博客，也就是多边形的新博客里，更新了<a href="http://blog.sina.com.cn/s/blog_53915d1a0100j11o.html">第二篇文章</a>，准确的告诉了我们一切我们所需要的信息，和整个故事最终的结局。这篇4月27日凌晨更新的文章，我到两天后的今天，也是1点，才看到。原文如下：</p>

<blockquote><p>《有一天，世界会原谅我们的无知吗》</p>

<p><a href="/images/uploads/wp/2010-04-29_levelup_cn_staff.jpg"><img src="/images/uploads/wp/2010-04-29_levelup_cn_staff.jpg" alt="" /></a></p>

<p>已经这么多年了</p>

<p>你还在为自己的梦想而奋斗吗</p>

<p>你还在努力改变生活吧</p>

<p>你知道的</p>

<p>我们被生活俘虏，就像电子被质子俘虏</p>

<p>我们逃不出身边的概率云，这就是命运</p>

<p>人，大概永远也得不到最爱的东西吧</p>

<p>也许上天就是这样骗我们继续生活下去</p>

<p>有一天，世界会原谅我们的无知吗</p>

<p>&#8212;-BY 栾东（原levelup.cn站长Hikaru，原UCG编辑泰坦）</p>

<p>（2010年3月22日，levelup.cn因为&#8221;相关部门的有关规定&#8221;而关闭。题图为2010年4月9日，levelup.cn仅剩的全体成员最后的&#8221;散伙饭&#8221;，就这顿饭还是大家AA制，因为公司不愿意&#8212;-也不可能&#8212;-掏钱。翌日，LU的文编们在领取遣散费之后正式下岗，而LU的技术员们至今仍有人还在为争取最后的利益与公司抗争。曾经国内最顶尖最专业的电视游戏资讯网站就此成为历史。）</p></blockquote>

<p>是的一切都尘埃落定了，我倒不是特别想说什么。这样一个并没有颠覆国家政权，一直遵守法律的，并且是国内游戏咨询绝对第一把交椅的好网站，就这样无情的被关闭了。我没有抱怨国家政策，国家有国家的考量，我只是有一些哀伤，因为有很多和levelup一样，和我一样希望在互联网上干出自己一片天地的人，也许或有或无的遭受了政策上的约束，也许是我们的梦想太遥远了吧，遥远到即使我们已经以为把这个梦想抓在手上，甚至抓住了5年的时候，它其实还是一个梦，一戳就破的梦。如果说，twitter, youtube, google, facebook等等网站的离开给我带来的是一种失去优秀互联网产品的遗憾和嫉妒，是一种对相识多年的好友远去的难过和遗憾的话；那像levelup这样属于我们国人自己的东西离开的时候，就让我觉得是失去了一个亲人甚至是看着他长大的孩子一样的心痛和悲伤。</p>

<p>Arthur今天很难过，真的很难过。以上。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-29T09:18:10+08:00" pubdate data-updated="true">Apr 29<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/video-game/'>Video Game</a>, <a class='category' href='/blog/categories/internet/'>internet</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/ms-sql-server-build-version-and-migration-method/">
		
			SQL Server各版本编号及迁移方法</a>
	</h2>
	<div class="entry-content">
		<p>使用sql server附加数据库的时候会遭遇到一些错误，其中有一个很常见的就是&#8221;数据库XXX的版本为655，无法打开。此服务器支持643版及更低版本。不支持降级路径。&#8221;其实是很困扰的错误，因为你明明知道你的版本低，可是不知道自己应该装什么版本。比如我是把一个10.0.2531上的数据库attach到10.0.1300的数据库上发生了上面的错误。</p>

<p>于是Google了一下，找到了<a href="http://sqlserverbuilds.blogspot.com/">这个文章</a>(墙外)的那些东东，就是我们解决这个错误的最好办法。查一下就可以知道10..0.2531就是SP1，那么装上SP1就好了吧~</p>

<p>当然要把数据库移到旧版本的需求肯定是有的，那要怎么做呢？首先可以确定的是&#8221;附加&#8221;肯定是不行，另外&#8221;备份-还原&#8221;也是不行。<a href="http://social.microsoft.com/Forums/zh-CN/sqlserverzhchs/thread/aa561da8-db83-4304-84f2-8c4995b95994">这里</a>有个好办法：</p>

<ol>
<li><p>在2008中右键点击数据库 - 任务 - 生成脚本。</p></li>
<li><p>在向导中为整个库的对象生成脚本，并设置好相关的脚本生成选项，脚本的服务器版本要选择你需要的低版本，比如sql server 2005。</p></li>
<li><p>去低版本（如2005）中执行刚才生成的脚本，数据结构就好了。</p></li>
<li><p>最后再用数据导入/导出向导把数据导过去</p></li>
</ol>


<p>今天把某些数据给同学的时候发生的错误，因为对方的版本低一点，记录一下。</p>

<p><strong>Update：</strong></p>

<p>比较郁闷的是我同学的10.0.1300是可恶的CTP版本，这个版本不能直接安装SP1，非常郁闷，而SP1最起码装在10.0.1600也就是RTM版上，这真是有些郁闷的。</p>

<p>以上。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-27T23:05:28+08:00" pubdate data-updated="true">Apr 27<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/more-about-blog-migration/">
		
			博客搬家后续</a>
	</h2>
	<div class="entry-content">
		<p>博客搬家几天了，一直时不时的在做一些剩余的工作，比较郁闷的是前天夜里突然发现调整过ID的日志和与之相匹配的分类、标签信息都错位了，于是又在wp_term_relationship表里调整了好久。不过总算是后来有惊无险损失不大。</p>

<p>因为那次经历大大的加深了我对wordpress的数据库设计的熟悉程度。刚刚开始调整的时候我不停的抱怨WP的设计过于技巧化，无论是post的category还是tag，还是说links对象的category，实现的方式只有一种&#8212;-term，然后通过一张term_taxonomy的表来记录这些term的具体类型(taxonomy)。而tags和posts的关系则被存在另一张叫做term_relationships的表里，这看起来倒是有点像一张n-n表的样子了，不过也不是这么简单，WP伟大的把links（会不会还有其他对象我没有注意到）和term的关系也一起放到了这张表里。于是这张表里的object_id有时候它是post的id，有时候也会是link的id。comment是不能加tag的，不然估计也一起写进去了。</p>

<p>另外WP的数据库和一般的博客系统例如Z-BLOG有很大的不同&#8212;-写文章的时候是拥有版本管理的。这是一个非常酷且实用的功能，尤其是对理性的程序员使用者来说这样的功能真是用不着但是有备无患的存在。但是这样的功能数据库是如何实现的呢，于是你会发现每更新一篇文章，为重新作为一个post对象插入到数据库里。Z-blog的一篇文章是一条记录，那么最终我用id作为静态文件（z-blog支持建立静态页面）的名字的话，它们都将是延续的（除非中间有草稿或者被删除过）。而WP这样id必定不是连续的，所以url里%postid%似乎是这篇文章的第一个版本的ID。具体情况没有更加深入了。</p>

<p>上面两段讲了讲对WP数据结构的初步认识，还是挺有趣的，这样基本上也坚定了我不适用ID作为文章地址的决心了。下面还有几个东西要说说。</p>

<p><strong>关于URL</strong>，我真的决心去掉了原来permalinks的方式，当然这也是在原来博客链接都无缝转移到现在的前提下。安装了<a href="http://www.deanlee.cn/wordpress/permalinks-migration-plugin/">dean&#8217;s pemalinks migration</a>这个插件，告诉他之前的permalinks和现在的，他会自动帮你把访问原来地址的请求301到现在的地址。只是比较蛋疼的是原来的博客文章都没有slug这个东东，中文做url又不是很好，所以我一篇一篇文章的加上了slug，使得所有的文章都拥有一个英文的url。话说新的sitemap才提交，不知道搜索引擎们什么时候会更新我的url地址，不过有301总是没有什么大问题滴~</p>

<p><strong>关于原来的主机</strong>，今天和服务商取得了联系，他们要求我提交一份新的备案信息，之前的备案是工信部的，这一次是浙江网监的（主机在杭州）。我坚持不配合，我告诉他们我不再需要他们的服务了，因此也不再需要履行这些程序了，我只是希望拿出原有主机上的所有数据（现在因为没有提交信息，ftp处在禁止接入的状态），对方承诺今天下午可以帮我全部下载回来。总共也不到100M的数据，何况我备份过了其中的大部分。</p>

<p><strong>关于SyntaxHighlight</strong>，我还是把之前会引起javascript执行错误的文章找出来给改好了。其实大部分工作最终还是在数据库用replace函数搞定了，只是还有一些个例，最后是在数据库里个别修复的（不在后台是为了绕过版本管理，毕竟是之前的老数据的转换问题）。只是比较奇怪的是代码的缩进都丢了，事实上数据库里是存在的，如果不是WP程序问题，就是使用的模板的关系，这个可能再观察一段时间吧。</p>

<p><strong>关于feed</strong>，之前说了是无缝转换过来了。只是我看了WP的feed的详细介绍，我决定不再使用feed烧录的服务了。feedsky经常故障众所周知，feedburner已经在墙外，从阅读器跳转到原址已经不可能了。另外，wordpress轻松的可以实现RSS RSS2 ATOM各个标准的订阅，如果烧录恐怕我要根据不同的需求全都烧录下（按照我的想法），那与其这样还不如就那样算了。这样的缺点是我再也不知道有多少个订阅者了。但是和全文输出feed的初衷一样，我希望可以带来更好的体验，起码我一更新文章就可以等着阅读器来抓了（不然还要等feed烧录服务先来抓）。新的订阅者或老的订阅者都可以直接订阅<a href="http://arthraim.cn/feed">http://arthraim.cn/feed</a>，当然就像我说的，feedsky的<a href="http://feed.arthraim.cn/">http://feed.arthraim.cn/</a>也依然有效，至于feedburner的地址我就不放了（从来没有放出来过）。</p>

<p><strong>关于评论和Google Friend Connect</strong>，之前的博客我去掉了Z-blog自带的评论系统，而全部采用了GFC的登录、评论。这样大大的抬高了评论的门槛，但是好处在于我可以block掉一些讨厌的留言者。现在WP完全支持&#8221;拖黑&#8221;的需求，并且比起以往，我更希望看到看我博客的人的回复和交流了。至于GFC，我觉得已经不再有必要整合进博客了，总的来说GFC还是相当失败的，比如它和prototype.js的兼容性。</p>

<p><strong>关于kill ie6</strong>，我最终使用了NEOEASE的mg12提供的<a href="http://www.neoease.com/lets-kill-ie6/">这个脚本</a>，很美观。因为我的模板本身是兼容IE6，所以其实对IE6用户来说体验还是不错的，因为这个脚本不是那么暴力。相比起来老赵的博客就非常暴力了，用IE6？你别去了…… 当然，作为一个互联网从业者，我奉劝大家升级IE6吧，同时我推荐大家使用万能无敌天下无双完美支持CSS3 HTML5的次时代新浏览器Google Chrome。</p>

<p><strong>关于手机用户</strong>，我装了MobilePress的插件，使用手机访问时会自动根据user-agent给你合适的页面了。普通手机访问时MobilePress默认的主题，而iPhone用户我特地给换了一个和Carrington主题配套的一个移动版主题，只是我没有iPhone没有试过好不好。在android上测试下来，这个主题没有MobilePress自带的来的好，但是它是专门为iPhone设计的哦。所有的同学可以通过更换url访问本博客的这3个不同版本，分别是普通网页版（<a href="http://arthraim.cn/?nomobile">http://arthraim.cn/?nomobile</a>）、普通手机版（<a href="http://arthraim.cn/?mobile">http://arthraim.cn/?mobile</a>）、iPhone版（<a href="http://arthraim.cn/?iPhone">http://arthraim.cn/?iPhone</a>）。欢迎大家根据需求选择。</p>

<p>这就是全部关于这次搬家我剩下的没有说完的了，谢谢大家耐心看完。</p>

<p><strong>Update 2010-04-27</strong>：</p>

<p>今天下午客服主动联系我帮我把数据打包好了提供我下载，顺利的下载到了之前的数据，有用的我已经都放回到现在的服务器上了，不得不感谢一下这位客服同学，他给我的貌似是一个网通IP，我是电信的，所以为了等我龟速下载完，他一直没有重启服务器，等到我下载完成后才继续。这样的态度对待一个要放弃他们产品的客户，实在是让人有些感动。</p>

<p>值得一提的是他把我的根目录所有的数据他都打包了，以至于我发现之前黑掉我博客的那个木马还在，被我现在电脑里的杀毒软甲杀了，不过他们的服务器…… 希望那个技术人员注意到了这一点。</p>

<p>以上。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-27T10:38:08+08:00" pubdate data-updated="true">Apr 27<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/z-blog-wordpress-migration/">
		
			正式从Z-blog搬到Wordpress</a>
	</h2>
	<div class="entry-content">
		<p>Arthraim.cn的关注者们，在时隔2天后，相信今天你们来到本博客会看到一个全新的样子。是的，正如标题所说，我正式搬迁了服务器，并且从Z-BLOG转到了Wordpress。</p>

<p>因为之前arthraim.cn一直使用的是某个国内虚拟主机，而在上个月低，该主机遭到黑客侵入，虽然我在第一时间修复了自己的博客程序，但是似乎托管的服务器依然被挂马，之前唯一连接空间的方式是ftp，所以非常被动。本来该公司的客服是非常耐心非常好的，QQ上大部分时间都在线，有什么问题基本上第一时间都能解决。本来一直没有放弃主要就是因为让我信服的良好客服，但是因为年初互联网收紧时该公司的业务发生过调整，所以现在移交总公司的业务已经变得毫无态度可言了，在Arthur彻底失去信心的同时，也决定正式搬家。</p>

<p>现在你们看到的博客已经搬到了新的主机上，是@caoxg大侠的服务器（不知是不是那台传奇的Javaeye的第一台服务器）。因为这个使用lamp，所以原来我的asp博客不得不放弃了，转投wordpress。</p>

<p>事实上从Z-blog搬到Wordpress最麻烦的是数据，我看了Z-blog的数据结构，和一张wordpress的<a href="http://tech.idv2.com/wp-content/uploads/2007/01/wordpress-db-er-diagram.png">ER图</a>，就转换来说还是有些困难的。不过搜索一下都能知道，Z-blog可以先转到movable type的数据，再导入wordpress，只是那个插件是在2006年的时候写的。我用了一个可以保留tag的新版本，在<a href="http://hidigi.net/post/zblog-wordpress-migration.html">这里</a>可以找到下载。</p>

<p>用插件转方便一点，不过因为我要保持原来的url无缝过来，原来的url又是ID.HTML的静态页面，所以有些麻烦，因为导进来的ID不一样，所以在数据库里update了很久，把ID都调整正确。这样是有好处的，一是保证了搜索引擎尽可能小的降权，让收录的页面仍然正常指向，也保证了自己博客的一些内部静态链接正确无误，不影响阅读。虽然事实上原来的url是对SEO无益的，不过我还是愿意保持原状。另外，Z-blog导出的movabletype.asp文件里也可以简单的替换完成很多数据的处理。比如ZBLOG_HOST这样的变量的替换。</p>

<p>Z-blog也是一个支持插件的博客系统，并且我使用的几个插件都让我非常满意，其中最麻烦的是SyntaxHighlighter，作为一个时常贴代码的博客我是必须需要这个插件的。但是原来博客使用的是1.5，在2.0时做了很多修改，也让我一直难以升级。这次利用数据迁移的时候，顺便把它也升级了。值得一提的是很多文章里老的调用还是保留着，所以可能浏览器会报错，不过不影响阅读。实在是一片一片的修改文章会很辛苦，我懒，把能一起处理的处理掉了，剩下的就那样吧。</p>

<p>数据还有一部分就是大量的图片，图片的URL我打算全部放弃原来的了，我也不在乎搜索引擎收录的图片，所以在导出的movabletype.asp里我就把所有的图片url替换掉了。图片上传到新服务器的就能直接访问了，昨晚已经传完了。</p>

<p>之后还有要做的是SEO相关的，重新下插件生成sitemap.xml，然后到Google,Yahoo,bing的webmaster tools去重新提交sitemap以及重新验证。这倒是相对轻松的。wordpress的baidu sitemap插件也有了，只是可惜百度站长管理平台至今还是邀请制的，没办法提交。</p>

<p>当然对feed订阅者来说，可能感受不到变化，不过我也在feedsky和feedburner都重新修改的新的feed地址，所以对订阅者来说最多会发现今天更新了10篇老文章而已，不需要修改订阅地址~ 也算是无缝切换了~</p>

<p>那么这样，搬家工作经历一个通宵就顺利完成了，相信用几天后还会出现这样那样的问题的，并且我还有一点点的数据死在原来的服务器上现在没办法拯救回来。wordpress还是很强大，就是编辑器我很不喜欢，为了保持以前fckeditor的使用习惯，我还特地给WP装上了ckeditor。</p>

<p>最后要感谢@caoxg，还要感谢Google到的那些先人们，当然还要感谢Google。如果大家发现有什么问题，请联系我。这时候我突然想起kill ie6还没有干……</p>

<p>以上……</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-25T21:17:36+08:00" pubdate data-updated="true">Apr 25<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/after-hdslon2/">
		
			写在人本设计沙龙之后</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://hdsalon.org/">人本设计沙龙</a>，由丁宇、曹晓钢、贺师俊一起筹划举办的一个聚会。机缘巧合，因为在曹晓钢所创办的人间网实习，所以从萌芽阶段就接触到了这个让人有些兴奋的活动。因为要用人间网作为人本设计沙龙的实时大屏幕，所以作为intern，我有幸以人间团队的一员参加了第一届人本设计沙龙。我现在还记得去年年底在张江博雅酒店的会议室里，丁宇温文尔雅的给我们介绍家酿俱乐部（homebrew），告诉我们希望人本设计沙龙也可以向那个目标靠拢。将近半年之后，第二届也又来了。</p>

<p>于是…… 我又去了。我也希望之后的每一届我都能去，因为两届人本设计沙龙都给我留下了非常非常深刻的印象。尤其是今天，我在A会场听了范凯（JavaEye的Robbin）的演讲。他以非常快速的语速介绍着JavaEye这个从BBS一路走来的成功技术社区，真的是太精彩了。这就像金庸武侠片的套路一样的展开，看一个小孩儿称为武林高手的坎坎坷坷。我觉得要总结JavaEye的成功，就是要用Robbin不停提到的那句话&#8221;坚持核心价值&#8221;。特别好。不知道大家有没有看过《<a href="http://robbin.javaeye.com/blog/608044">Think Different - 从苹果的用户体验说JavaEye的用户体验</a>》这篇文章，当时看完我就感触良多，今天能有幸听到Robbin亲自阐述他的坚持，他的价值观，三生有幸啊。</p>

<p>在另外一个会场，是大名鼎鼎的西乔的演讲，我在休息的时候围观了一下西乔本人hoho。如果说我对人本设计沙龙有什么意见，那就是希望不要分两个分会场。一个是因为无论针对设计还是程序，两个分会场都是有吸引人的点的。尤其是Robbin的演讲，我想对产品设计来说真的是非听不可的东西。另外一个，后面的两个演讲实在是可有可无。我向来不是刻薄的人，不过A会场的第二场演讲实在是不怎么样。虽然主讲人心里似乎有些想法，但是她完全没有交代清楚。到底要怎么Zoom out, zoom in，界限是什么，如何把握等等什么都没有说。光是说该Zoom out的时候zoom out，该zoom in的时候zoom in，实在是大话空话。另外大篇幅的&#8221;路痴&#8221;&#8220;谷歌地图&#8221;&#8220;网游&#8221;作为例子很生动但是太过头了。好的演讲者问答阶段的表现往往是最精彩的，观众还没有反应过来演讲人已经一把抓住了提问者的中心思想，即便提问者不能很好的表达出来。</p>

<p>抱怨了点点，下面要说一下盛大。要说我对这个企业的认识，之前都是抽象的，直到我慢慢的接触了盛大一些领导、员工，接触了盛大创新院。让我觉得这个公司真的很是不同。不知道有没有人和我一样抬头看着博客园的老赵，赵劼。听闻老赵在创新院里做了很多事情，比如图书啊演讲啊之类的，无论如何我所感受到的是一个充满了分享、共同进步的团体，而不是项目组之前互相争夺，有所保留的大企业。盛大赞助一些诸如人本设计沙龙这样的活动本身，不但提高了一些技术社区的水平，也不断的吸收各路英才。你说他是招兵大会也好，说的怎么难听都行，重视人才没有什么值得害臊的。</p>

<p>讲的多了点。我想我是挺幸运的，遇到了一些机遇，现在很满足，也鞭策自己要不断提高自己。我身边有一群伟大的人们做着一些伟大的事业，这也让我不断的可以看到先进的领先的东西，也拉动我、推动我向前走。</p>

<p>从高中在文曲星上写游戏，大一在网吧嗑瓜子写代码，到如今的一个接近毕业的应届生，我也是迷茫的一步一步走出迷雾。我很愿意和正在迷茫的大学生交流。我至今仍然记得把游戏开发人作为梦想的我自己是如何迷茫在网络上寻找游戏开发的资料的。我之所以翻译XNA的<a href="/post/2009/06/70.html">教</a> <a href="/post/2009/07/81.html">程</a>都是出于这样一个初衷，希望迷茫的只是我。当然，向前走的话，我还有很多值得迷茫的…… 起码，我觉得大学四年其实是可以比我现在的程度学到更多，学的更好的，只要少一点迷茫，多一点坚持。</p>

<p>又扯远了，就这样吧。以上……</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-19T06:50:38+08:00" pubdate data-updated="true">Apr 19<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/internet/'>internet</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/douban-fm-desktop-client-arthur-wrote-a-lol-script/">
		
			豆瓣电台桌面客户端 - Arthur蛋疼剧本一枚</a>
	</h2>
	<div class="entry-content">
		<p><strong>以下，剧本一枚</strong></p>

<p>[幕起] Arthur抱着一个印着女朋友照片的杯子，在闲暇的午后坐在床边敲键盘…… 一边写程序，一边Chrome查资料，一边豆瓣电台听音乐，他突然觉得有些烦躁，因为豆瓣音乐也是一个Chrome的窗口…… 麻烦……</p>

<p>Arthur：我又蛋疼了（一边在上人间）</p>

<p>天之音：你干嘛？</p>

<p>Arthur：我想让豆瓣电台更桌面一点。<a href="/post/2010/01/141.html">上次的bookmarklet</a>t只是打开简单一点而已啊。</p>

<p>天之音：你到底图个啥？</p>

<p>Arthur：哥蛋疼。（双眼炯炯有神，望天）</p>

<p>天之音：已经够简单了，你还不够吗？</p>

<p><img src="/images/uploads/zb/2010-04-13_douban_fm_chrome.png" alt="" /></p>

<p>Arthur：最好…… Win7最小化后和Chrome不在一组里，有独立的打开图标，没有那个地址栏。</p>

<p>天之音：你蛋疼（orz）</p>

<p>Arthur：（自言自语）AIR的html loader能不能跑flash啊……</p>

<p>天之音：你看过《<a href="/post/2009/04/3.html">我用Chrome，遐想云时代</a>》这篇文章吗？</p>

<p>Arthur：谁写的？</p>

<p>天之音：您真蛋疼……</p>

<p>（Arthur这时候开始使用Chrome的Create Application，</p>

<p>然后开始找豆瓣电台的图标做成ico，给shortcut换上，</p>

<p>打开应用，调整好窗口的大小，关闭，再打开，大小也保存了。</p>

<p>心满意足）</p>

<p>天之音：您满意了吧？</p>

<p>Arthur：我真蛋疼…………</p>

<p><img src="/images/uploads/zb/2010-04-13_douban_fm_app.png" alt="" /></p>

<p>天之音：你还能更蛋疼吗？</p>

<p>Arthur：我还想有个托盘图标…………</p>

<p>天之音：谁创造的你啊！</p>

<p>Arthur：你也蛋疼……</p>

<p>天之音：你想比谁蛋疼吗？我告诉你一个事情，去年的今天，你写了arthraim.cn的第一篇文章，一周年的时候你在写这个</p>

<p>Arthur：好吧，我真TM蛋疼…………</p>

<p>[灯光淡出，幕落]</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-13T21:42:25+08:00" pubdate data-updated="true">Apr 13<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/internet/'>internet</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blunt-c-sharp-1-auto-shutdown/">
		
			Blunt C# (1): 自动关机</a>
	</h2>
	<div class="entry-content">
		<p>开始好好整理毕业设计的代码，在硬盘里找出很多以前写的C#代码，很多自己写的小应用都蛮有趣的，比如自动关机啊，修改系统变量啊，计算周年纪念日啊之类的无聊的小东西~ 想着最近博客也没有什么值得更新的内容，要不就贴一些以前的这些程序的傻傻的代码吧~ 所以这个blunt C-sharp（钝的C锋利LOL）系列的文章就是贴这些代码的，欢迎大家讨论代码的好坏~ 骂我的时候Arthur会加上&#8221;被骂的是过去的我&#8221;这个前提的~ hoho~</p>

<p>今天是自动关机的那个程序~</p>

<p>还是2009-1-18的时候在学长的电脑上用SharpDevelop写的。当时和他一起租房子住在外面，后来有段时间他快毕业了，出去找工作了，于是我每天一个人看动画看到睡着，因为租房子要省电费，所以电脑开通宵很心疼，所以就自己写了一个自动关机的程序，其他东西都不是关键，关键还是代码。当时是不知道哪里找来了一段关机的代码，是用C#调用winapi的其实~  截图和代码都放在下面吧~</p>

<p><img src="/images/uploads/zb/2010-04-03_bluntcsharp_autoshutdown.png" alt="" /></p>

<p>话说这个程序现在看起来体验很好，因为时间匹配的时候不会直接把电脑关了，而会出来一个提示框，提示框上倒数30秒（足够我从被窝里爬出来去点取消），如果没点取消就关机~ 哈哈。当时不知道怎么想的，这么一个需求还要自己写个程序~ 果然有热情！</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="c1">// 这个结构体将会传递给API。使用StructLayout(...特性，确保其中的成员是按顺序排列的，C#编译器不会对其进行调整。</span>
</span><span class='line'><span class="na">[StructLayout(LayoutKind.Sequential, Pack = 1)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">struct</span> <span class="nc">TokPriv1Luid</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="n">Count</span><span class="p">;</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span> <span class="n">Luid</span><span class="p">;</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="n">Attr</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">// 以下使用DllImport特性导入了所需的Windows API。</span>
</span><span class='line'><span class="c1">// 导入的方法必须是static extern的，并且没有方法体。调用这些方法就相当于调用Windows API。</span>
</span><span class='line'><span class="na">[DllImport(&quot;kernel32.dll&quot;, ExactSpelling = true)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="n">IntPtr</span> <span class="nf">GetCurrentProcess</span><span class="p">();</span>
</span><span class='line'><span class="na">[DllImport(&quot;advapi32.dll&quot;, ExactSpelling = true, SetLastError = true)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">bool</span> <span class="nf">OpenProcessToken</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">h</span><span class="p">,</span> <span class="kt">int</span> <span class="n">acc</span><span class="p">,</span> <span class="k">ref</span> <span class="n">IntPtr</span> <span class="n">phtok</span><span class="p">);</span>
</span><span class='line'><span class="na">[DllImport(&quot;advapi32.dll&quot;, SetLastError = true)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">bool</span> <span class="nf">LookupPrivilegeValue</span><span class="p">(</span><span class="kt">string</span> <span class="n">host</span><span class="p">,</span> <span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">long</span> <span class="n">pluid</span><span class="p">);</span>
</span><span class='line'><span class="na">[DllImport(&quot;advapi32.dll&quot;, ExactSpelling = true, SetLastError = true)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">bool</span> <span class="nf">AdjustTokenPrivileges</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">htok</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">disall</span><span class="p">,</span>
</span><span class='line'><span class="k">ref</span> <span class="n">TokPriv1Luid</span> <span class="n">newst</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">prev</span><span class="p">,</span> <span class="n">IntPtr</span> <span class="n">relen</span><span class="p">);</span>
</span><span class='line'><span class="na">[DllImport(&quot;user32.dll&quot;, ExactSpelling = true, SetLastError = true)]</span>
</span><span class='line'><span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">bool</span> <span class="nf">ExitWindowsEx</span><span class="p">(</span><span class="kt">int</span> <span class="n">flg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rea</span><span class="p">);</span>
</span><span class='line'><span class="c1">// 以下定义了在调用WinAPI时需要的常数。这些常数通常可以从Platform SDK的包含文件（头文件）中找到</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">SE_PRIVILEGE_ENABLED</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000002</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">TOKEN_QUERY</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000008</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">TOKEN_ADJUST_PRIVILEGES</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000020</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">SE_SHUTDOWN_NAME</span> <span class="p">=</span> <span class="s">&quot;SeShutdownPrivilege&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_LOGOFF</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000000</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_SHUTDOWN</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000001</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_REBOOT</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000002</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_FORCE</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000004</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_POWEROFF</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000008</span><span class="p">;</span>
</span><span class='line'><span class="k">internal</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">EWX_FORCEIFHUNG</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00000010</span><span class="p">;</span>
</span><span class='line'><span class="c1">// 通过调用WinAPI实现关机，主要代码再最后一行ExitWindowsEx，这调用了同名的WinAPI，正好是关机用的。</span>
</span><span class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">DoExitWin</span><span class="p">(</span><span class="kt">int</span> <span class="n">flg</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">bool</span> <span class="n">ok</span><span class="p">;</span>
</span><span class='line'>    <span class="n">TokPriv1Luid</span> <span class="n">tp</span><span class="p">;</span>
</span><span class='line'>    <span class="n">IntPtr</span> <span class="n">hproc</span> <span class="p">=</span> <span class="n">GetCurrentProcess</span><span class="p">();</span>
</span><span class='line'>    <span class="n">IntPtr</span> <span class="n">htok</span> <span class="p">=</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span>
</span><span class='line'>    <span class="n">ok</span> <span class="p">=</span> <span class="n">OpenProcessToken</span><span class="p">(</span><span class="n">hproc</span><span class="p">,</span> <span class="n">TOKEN_ADJUST_PRIVILEGES</span> <span class="p">|</span> <span class="n">TOKEN_QUERY</span><span class="p">,</span> <span class="k">ref</span> <span class="n">htok</span><span class="p">);</span>
</span><span class='line'>    <span class="n">tp</span><span class="p">.</span><span class="n">Count</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'>    <span class="n">tp</span><span class="p">.</span><span class="n">Luid</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>    <span class="n">tp</span><span class="p">.</span><span class="n">Attr</span> <span class="p">=</span> <span class="n">SE_PRIVILEGE_ENABLED</span><span class="p">;</span>
</span><span class='line'>    <span class="n">ok</span> <span class="p">=</span> <span class="n">LookupPrivilegeValue</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="n">SE_SHUTDOWN_NAME</span><span class="p">,</span> <span class="k">ref</span> <span class="n">tp</span><span class="p">.</span><span class="n">Luid</span><span class="p">);</span>
</span><span class='line'>    <span class="n">ok</span> <span class="p">=</span> <span class="n">AdjustTokenPrivileges</span><span class="p">(</span><span class="n">htok</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="k">ref</span> <span class="n">tp</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">IntPtr</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span>
</span><span class='line'>    <span class="n">ok</span> <span class="p">=</span> <span class="n">ExitWindowsEx</span><span class="p">(</span><span class="n">flg</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>坦率的说我也不知道是哪里找来的这个代码，如果您看了，知道这个代码的原作者，也请告诉我，并不是我不尊重他，是我年少无知 =  =</p>

<p>以上~</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-04T07:24:13+08:00" pubdate data-updated="true">Apr 4<span>th</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/programing/'>Programing</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/new-search-engine-appears-in-china/">
		
			国内惊现新中文搜索引擎，实力足以挑战百度！</a>
	</h2>
	<div class="entry-content">
		<p>就在刚才，访问人间的时候突然发现人间的主页发生了巨大的变化！提供了一个类似Google和百度的搜索页面，Arthur输入arthraim之后瞬间就傻了！就这个实力绝对可以挑战百度啊！！有图为证！</p>

<p><img src="/images/uploads/zb/2010-04-01_002203.png" alt="" /></p>

<p>以上~</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-04-01T08:22:15+08:00" pubdate data-updated="true">Apr 1<span>st</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/internet/'>internet</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/blog/page/6/" class="prev">Prev</a>
    
    
        <a href="/blog/page/8/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2012

    Arthur Wang

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'artorius';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>